"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[759],{5759:(O,g,e)=>{e.r(g),e.d(g,{LoginModule:()=>M});var c=e(6895),a=e(4006),p=e(7754),u=e(6630),l=e(7340);const f=(0,l.X$)("fadeInUp",[(0,l.eR)(":enter",[(0,l.oB)({transform:"translateY(3vh)",opacity:0}),(0,l.jt)("400ms cubic-bezier(0.35, 0, 0.25, 1)",(0,l.oB)({transform:"translateY(0)",opacity:1}))])]);var h=e(2340),y=e(5439),t=e(4650),v=e(529),s=e(9549),x=e(284),L=e(7392),Z=e(4859),C=e(1733),m=e(1576);function T(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"We need an email address to log you in"),t.qZA())}function I(o,r){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"visibility"),t.qZA())}function b(o,r){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"visibility_off"),t.qZA())}function w(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"We need a password to log you in"),t.qZA())}function A(o,r){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Oqu(n.result)}}const U=[{path:"",component:(()=>{class o{constructor(n,i,d,N){this.fb=n,this.cd=i,this.http=d,this.router=N,this.inputType="password",this.visible=!1}ngOnInit(){this.form=this.fb.group({email:["",a.kI.required],password:["",a.kI.required]})}login(){this.result="";var n=new FormData;n.append("email",this.form.value.email),n.append("password",this.form.value.password),this.http.post(h.N.authUrl,n).subscribe({next:i=>(this.loginResult(i),i),error:i=>(this.loginError(i),i)})}loginResult(n){return!(!n||!n.authenticated)&&(window.localStorage.setItem("loggedIn",n.authenticated),window.localStorage.setItem("token",n.authorisation.token),window.localStorage.setItem("userId",n.user.id),window.localStorage.setItem("username",n.user.name),window.localStorage.setItem("lastlogin",y().format()),this.router.navigate(["/loads"]),n.authenticated)}loginError(n){console.log(n),this.result=n.error.message,console.log(this.result)}toggleVisibility(){this.visible?(this.inputType="password",this.visible=!1,this.cd.markForCheck()):(this.inputType="text",this.visible=!0,this.cd.markForCheck())}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(a.QS),t.Y36(t.sBO),t.Y36(v.eN),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["fury-login"]],decls:24,vars:8,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"page","background-pattern"],[1,"card","border-radius","elevation"],["fxLayout","column","fxLayoutAlign","center center",1,"header","padding","background-primary"],[1,"logo","fill-primary-contrast"],["fxLayout","column","fxLayoutGap","16px",1,"padding",3,"formGroup"],["fxFlex","auto","fxLayout","column"],["fxFlex","grow"],["matInput","","required","","formControlName","email"],[4,"ngIf"],["matInput","","formControlName","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","","matTooltip","Toggle Visibility",3,"click"],["type","button","color","primary","mat-raised-button","",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),t._uU(8,"Email"),t.qZA(),t._UZ(9,"input",7),t.YNc(10,T,2,0,"mat-error",8),t.qZA(),t.TgZ(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Password"),t.qZA(),t._UZ(14,"input",9),t.TgZ(15,"button",10),t.NdJ("click",function(){return i.toggleVisibility()}),t.YNc(16,I,2,0,"mat-icon",8),t.YNc(17,b,2,0,"mat-icon",8),t.qZA(),t.TgZ(18,"mat-hint"),t._uU(19,"Click the eye to toggle visibility"),t.qZA(),t.YNc(20,w,2,0,"mat-error",8),t.qZA()(),t.YNc(21,A,2,1,"mat-error",8),t.TgZ(22,"button",11),t.NdJ("click",function(){return i.login()}),t._uU(23," SIGN IN "),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("@fadeInUp",void 0),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(6),t.Q6J("ngIf",i.form.get("email").hasError("required")),t.xp6(4),t.Q6J("type",i.inputType),t.xp6(2),t.Q6J("ngIf",i.visible),t.xp6(1),t.Q6J("ngIf",!i.visible),t.xp6(3),t.Q6J("ngIf",i.form.get("password").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.result))},dependencies:[c.O5,s.TO,s.KE,s.bx,s.hX,s.R9,x.Nt,L.Hw,Z.lW,C.gM,m.xw,m.SQ,m.Wh,m.yH,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u],styles:[".page[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.card[_ngcontent-%COMP%]{width:380px}@media screen and (max-width: 599px){.card[_ngcontent-%COMP%]{width:300px}}.card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{border-top-left-radius:8px;border-top-right-radius:8px}.logo[_ngcontent-%COMP%]{width:80px;height:80px}"],data:{animation:[f]}}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(U),u.Bz]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[],imports:[c.ez,J,p.q,a.UX]}),o})()}}]);